 (function(w,d){const p=(function(){let s=!1,u=null,o={listenLabel:"🔊 Listen",stopLabel:"⏹ Stop",increaseFontLabel:"A\u002B",decreaseFontLabel:"A\u2212",contrastLabel:"🔲 Contrast",containerId:"accessibility-toolbar",styleId:"accessibility-toolbar-style",fontStep:1,position:{bottom:"20px",right:"20px"}};function e(t,n){for(const r in n)if(n.hasOwnProperty(r))"object"==typeof n[r]&&!Array.isArray(n[r])?e(t[r]||(t[r]={}),n[r]):t[r]=n[r];return t}function c(){if(d.getElementById(o.styleId))return;const t=d.createElement("style");t.id=o.styleId,t.textContent=`#${o.containerId}{position:fixed;bottom:${o.position.bottom};right:${o.position.right};background-color:rgba(255,255,255,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:10px;border-radius:8px;z-index:9999;border:1px solid #ddd}#${o.containerId} button{margin:2px;min-height:38px;padding:6px 15px;cursor:pointer;background:#fff;border:1px solid #ddd;border-radius:8px;color:#000;display:inline-block;font-size:14px;user-select:none}#${o.containerId} button:hover{background:#000;color:#fff}body.high-contrast{background-color:#000 !important;color:#fff !important}body.high-contrast *{background:none #000 !important;background-image:none !important;color:#fff !important;filter:none !important;border-color:#ddd !important}body.high-contrast *::before,body.high-contrast *::after{display:none !important}body.high-contrast *:hover{filter:none !important}body.high-contrast a{color:#ddd !important}body.high-contrast a:hover{text-decoration:underline !important;opacity:.9}`;d.head.appendChild(t)}function r(t,n,e){const r=d.createElement("button");e&&(r.id=e),r.textContent=t,r.type="button",r.addEventListener("click",n);return r}function i(){if(d.getElementById(o.containerId))return;const t=d.createElement("div");t.id=o.containerId;const n=r(o.listenLabel,a,"listen-btn"),e=r(o.increaseFontLabel,f,"increase-font-btn"),s=r(o.decreaseFontLabel,l,"decrease-font-btn"),c=r(o.contrastLabel,m,"contrast-btn");t.appendChild(n),t.appendChild(e),t.appendChild(s),t.appendChild(c),d.body.appendChild(t)}function a(){const t=d.getElementById("listen-btn");if(!s){const n=w.getSelection().toString().trim();if(!n)return alert("Please select some text to listen."),void 0;u=new SpeechSynthesisUtterance(n),speechSynthesis.speak(u),s=!0,t.textContent=o.stopLabel,u.onend=()=>{s=!1,t.textContent=o.listenLabel}}else speechSynthesis.cancel(),s=!1,t.textContent=o.listenLabel}function f(){g(o.fontStep)}function l(){g(-o.fontStep)}function g(t){const n=d.querySelectorAll("body, body *");n.forEach(e=>{const n=w.getComputedStyle(e),r=parseFloat(n.fontSize);!isNaN(r)&&r>0&&(e.style.fontSize=r+t+"px")})}function m(){d.body.classList.toggle("high-contrast")}function init(t={}){o=e(o,t),c(),i()}return{init}})();w.ITYAccessibilityToolbar=p;if(w.ITYAccessibilityToolbarConfig){w.ITYAccessibilityToolbar.init(w.ITYAccessibilityToolbarConfig)}})(window,document);
